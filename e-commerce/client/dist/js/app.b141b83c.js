(function(t){function e(e){for(var o,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(p.length)p.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],o=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(o=!1)}o&&(n.splice(e--,1),t=s(s.s=r[0]))}return t}var o={},a={app:0},n=[];function s(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=o,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(r,o,function(e){return t[e]}.bind(null,o));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"20f0":function(t,e,r){"use strict";var o=r("fec4"),a=r.n(o);a.a},"3ac1":function(t,e,r){"use strict";var o=r("aea1"),a=r.n(o);a.a},"3f26":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var o=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Navbar"),r("router-view")],1)},n=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-breadcrumb",[r("b-breadcrumb-item",{attrs:{to:"/"}},[t._v("Home")]),this.$store.state.user&&"customer"===this.$store.state.user.role?r("b-breadcrumb-item",{attrs:{to:"/cart"}},[t._v("Cart")]):t._e(),this.$store.state.user?t._e():r("b-breadcrumb-item",{attrs:{to:"/register"}},[t._v("Sign Up")]),!this.$store.state.user||"admin"!==this.$store.state.user.role&&"owner"!==this.$store.state.user.role?t._e():r("b-breadcrumb-item",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"create",expression:"'create'"}]},[t._v("Add New")]),this.$store.state.user?r("b-breadcrumb-item",{on:{click:t.logout}},[t._v("Logout")]):r("b-breadcrumb-item",{attrs:{to:"/login"}},[t._v("Login")]),r("b-breadcrumb-item")],1),r("b-modal",{attrs:{id:"create","hide-footer":""}},[r("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.create(e)}}},[r("b-form-group",{attrs:{label:"Name:"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),r("b-form-group",{attrs:{label:"Description:"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),r("b-form-group",{attrs:{label:"Stock:"}},[r("b-form-input",{attrs:{type:"number"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}})],1),r("b-form-group",{attrs:{label:"Price:"}},[r("b-form-input",{attrs:{type:"number"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),r("b-form-group",{attrs:{label:"Image:"}},[r("b-form-file",{attrs:{state:Boolean(t.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Add")])],1)],1)],1)},i=[],c=(r("7f7f"),r("3d20")),u=r.n(c),l=r("bc3a"),d=r.n(l),p={name:"Navbar",props:{user:Object},data:function(){return{routes:[],name:"",description:"",stock:0,price:0,file:null}},methods:{logout:function(){this.$store.commit("LOGOUT"),"/"!==this.$route.path&&this.$router.push("/")},create:function(){var t=this,e=new FormData;e.append("name",this.name),e.append("description",this.description),e.append("stock",this.stock),e.append("price",this.price),e.append("file",this.file),d()({method:"post",url:"http://shopify-server.ricky-works.online/product",headers:{token:localStorage.getItem("token")},data:e}).then((function(e){var r=e.data,o=r.response;u.a.fire("Congratulations!",o,"success"),t.$store.dispatch("fetchProducts"),"/"!==t.$route.path?t.$router.push("/"):t.$bvModal.hide("create")})).catch(console.log)}}},m=p,f=r("2877"),h=Object(f["a"])(m,s,i,!1,null,null,null),b=h.exports,v={name:"App",components:{Navbar:b},mounted:function(){this.$store.dispatch("refresh")}},g=v,k=Object(f["a"])(g,a,n,!1,null,null,null),_=k.exports,y=r("8c4f"),w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("b-card-group",{attrs:{deck:""}},t._l(t.$store.state.products,(function(e){return r("Product",{key:e._id,attrs:{product:e,customer:t.customer},on:{responseFromProduct:t.addSuccess,updated:t.refresh,deleted:t.refresh}})})),1)],1)},$=[],x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-card",{staticClass:"mb-2",staticStyle:{width:"20rem"},attrs:{"bg-variant":"light",title:t.product.name,"img-src":t.product.file}},[r("b-card-text",[t._v(t._s(t.product.description))]),r("b-card-text",[t._v("Price : Rp. "+t._s(t.product.price))]),r("b-card-text",[t._v("Available : "+t._s(t.product.stock))]),this.$store.state.user&&"customer"===this.$store.state.user.role?r("b-button",{attrs:{variant:"outline-dark"},on:{click:function(e){return t.addToCart(t.product._id)}}},[t._v("Add To Cart")]):t._e(),t.checkAuthorized()?r("b-button-group",[r("b-dropdown",{attrs:{text:"Option"}},[r("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal"+t.product._id,expression:"`modal${product._id}`"}]},[t._v("Update")]),r("b-dropdown-divider"),r("b-dropdown-item",{on:{click:function(e){return t.destroy(t.product._id)}}},[t._v("Destroy")])],1)],1):t._e()],1),r("b-modal",{attrs:{id:"modal"+t.product._id,"hide-footer":""}},[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[r("b-form-group",{attrs:{label:"Name:"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),r("b-form-group",{attrs:{label:"Description:"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),r("b-form-group",{attrs:{label:"Stock:"}},[r("b-form-input",{attrs:{type:"number"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}})],1),r("b-form-group",{attrs:{label:"Price:"}},[r("b-form-input",{attrs:{type:"number"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Update")])],1)],1)],1)},O=[],S=(r("c5f6"),{name:"Product",props:{product:Object},data:function(){return{name:"",description:"",price:null,stock:null}},methods:{addToCart:function(t){var e=this;this.$store.state.user?d()({method:"post",url:"http://shopify-server.ricky-works.online/cart",headers:{token:localStorage.getItem("token")},data:{product_id:t}}).then((function(t){var r=t.data,o=r.response;e.$emit("responseFromProduct",o)})).catch(console.log):this.$router.push("/login")},checkAuthorized:function(){return!!this.$store.state.user&&("admin"===this.$store.state.user.role||"owner"===this.$store.state.user.role)},trigger:function(){this.$bvModal.show("modal")},update:function(){var t=this,e={name:this.name,description:this.description,stock:Number(this.stock),price:Number(this.price)},r={};for(var o in e)(e[o].length>0||e[o]===Number(e[o]))&&(r[o]=e[o]);d()({method:"patch",url:"http://shopify-server.ricky-works.online/product/".concat(this.product._id),headers:{token:localStorage.getItem("token")},data:r}).then((function(e){var r=e.data,o=r.response;t.$emit("updated"),t.$bvModal.hide(t.product._id),u.a.fire("Congratulations!",o,"success")})).catch(console.log)},destroy:function(t){var e=this;d()({method:"delete",url:"http://shopify-server.ricky-works.online/product/".concat(t),headers:{token:localStorage.getItem("token")}}).then((function(t){var r=t.data,o=r.response;u.a.fire("Congratulations!",o,"success"),e.$emit("deleted")})).catch(console.log)}},mounted:function(){var t=this.product,e=t.name,r=t.description,o=t.stock,a=t.price;this.name=e,this.description=r,this.price=a,this.stock=o}}),I=S,P=(r("e1cf"),Object(f["a"])(I,x,O,!1,null,"244fd15e",null)),C=P.exports,j={name:"home",components:{Product:C},props:{customer:Object},methods:{fetchProducts:function(){this.$store.dispatch("fetchProducts")},addSuccess:function(t){u.a.fire("Congratulations!",t,"success")},refresh:function(){this.fetchProducts()}},mounted:function(){this.fetchProducts()}},N=j,T=(r("20f0"),Object(f["a"])(N,w,$,!1,null,"6af61c48",null)),D=T.exports,E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-list-group",t._l(t.cart,(function(t){return r("b-list-group-item",{key:t._id},[r("Item",{attrs:{Item:t}})],1)})),1)],1)},L=[],U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("h1",[t._v("Name : "+t._s(t.Item.product_id.name))]),r("h4",[t._v("Price Per Piece : "+t._s(t.rupiah))]),r("h4",[t._v("Quantity : "+t._s(t.Item.quantity))])]),r("div",{staticClass:"col"},[r("b-button-group",{attrs:{vertical:""}},[r("b-button",{attrs:{variant:"outline-dark"},on:{click:function(e){return t.plus(t.Item.product_id._id)}}},[t._v("\n        Add +\n      ")]),r("b-button",{attrs:{variant:"outline-dark"},on:{click:function(e){return t.minus(t.Item.product_id._id)}}},[t._v("\n        Remove -\n      ")])],1),r("br"),r("b-button",{attrs:{variant:"outline-dark"},on:{click:function(e){return t.deleteOne(t.Item.product_id._id)}}},[t._v("\n      Remove From Cart\n    ")])],1)])},R=[],A=(r("4917"),r("6b54"),{name:"Item",props:{Item:Object},methods:{fetchCart:function(){var t=this;d()({method:"get",url:"http://shopify-server.ricky-works.online/cart",headers:{token:localStorage.getItem("token")}}).then((function(e){var r=e.data;t.cart=r}))},plus:function(t){d()({method:"patch",url:"http://shopify-server.ricky-works.online/cart/".concat(t),headers:{token:localStorage.getItem("token")},data:{operation:"plus"}}).then((function(t){var e=t.data,r=e.response;u.a.fire("Congratulations!",r,"success")})).catch(console.log)},minus:function(t){d()({method:"patch",url:"http://shopify-server.ricky-works.online/cart/".concat(t),headers:{token:localStorage.getItem("token")},data:{operation:"minus"}}).then((function(t){var e=t.data,r=e.response;u.a.fire("Congratulations!",r,"success")})).catch(console.log)},deleteOne:function(t){d()({method:"delete",url:"http://shopify-server.ricky-works.online/cart/".concat(t),headers:{token:localStorage.getItem("token")}}).then((function(t){var e=t.data,r=e.response;u.a.fire("Congratulations!",r,"success")})).catch(console.log)}},computed:{rupiah:function(){var t=this.Item.product_id.price.toString(),e=t.length%3,r=t.substr(0,e),o=t.substr(e).match(/\d{3}/g);if(o){var a=e?".":"";r+=a+o.join(".")}return"Rp. ".concat(r)}}}),M=A,F=Object(f["a"])(M,U,R,!1,null,"802f7eb0",null),G=F.exports,H={name:"cart",components:{Item:G},props:{product:Object},data:function(){return{cart:[]}},methods:{fetchCart:function(){var t=this;d()({method:"get",url:"http://shopify-server.ricky-works.online/cart",headers:{token:localStorage.getItem("token")}}).then((function(e){var r=e.data;t.cart=r}))}},created:function(){this.$store.state.user?this.fetchCart():this.$router.push("/login")},watch:{cart:function(){this.fetchCart()}}},q=H,z=(r("3ac1"),Object(f["a"])(q,E,L,!1,null,"fdd8862c",null)),J=z.exports,B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{on:{submit:t.onSubmit}},[r("b-form-group",{attrs:{label:"Username:"}},[r("b-form-input",{attrs:{placeholder:"Username"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),r("b-form-group",{attrs:{label:"Email address:"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("b-form-group",{attrs:{label:"Password:"}},[r("b-form-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1),r("div",{staticStyle:{"margin-left":"25vw"}},[r("p",{staticClass:"h-4"},[t._v("Old User?")]),r("b-button",{attrs:{variant:"primary"},on:{click:t.redirectToLogin}},[t._v("Login")])],1)],1)},Q=[],K={name:"Register",data:function(){return{email:"",username:"",password:""}},methods:{onSubmit:function(t){var e=this;t.preventDefault();var r={username:this.username,email:this.email,password:this.password};d()({method:"post",url:"http://shopify-server.ricky-works.online/user/register",data:r}).then((function(t){e.$store.commit("LOGIN",t),localStorage.setItem("token",t.token),e.$router.push("/")})).catch((function(t){var e=t.response,r=e.data.errors;u.a.fire("Oops",r[0],"error")}))},redirectToLogin:function(){this.$router.push("/login")}}},V=K,W=(r("af68"),Object(f["a"])(V,B,Q,!1,null,"70815cf9",null)),X=W.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("b-form-group",{attrs:{label:"Email address:"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("b-form-group",{attrs:{label:"Password:"}},[r("b-form-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Log In")])],1),r("div",{staticStyle:{"margin-left":"25vw"}},[r("p",{staticClass:"h-4"},[t._v("New User?")]),r("b-button",{attrs:{variant:"primary"},on:{click:t.redirectToRegister}},[t._v("Register")])],1)],1)},Z=[],tt={name:"Login",data:function(){return{email:"",password:""}},methods:{onSubmit:function(t){var e=this;t.preventDefault();var r={email:this.email,password:this.password};d()({method:"post",url:"http://shopify-server.ricky-works.online/user/login",data:r}).then((function(t){var r=t.data;localStorage.setItem("token",r.token),e.$store.commit("LOGIN",r),e.$router.push("/")})).catch((function(t){var e=t.response,r=e.data.msg;u.a.fire("Oops",r,"error")}))},redirectToRegister:function(){this.$router.push("/register")}}},et=tt,rt=(r("69cb"),Object(f["a"])(et,Y,Z,!1,null,"2b3b82a8",null)),ot=rt.exports;o["default"].use(y["a"]);var at=new y["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:D},{path:"/register",name:"register",component:X},{path:"/login",name:"login",component:ot},{path:"/cart",name:"cart",component:J,props:!0}]}),nt=r("5f5b"),st=(r("f9e3"),r("2dd8"),r("1881")),it=r.n(st),ct=r("2f62");o["default"].use(ct["a"]);var ut=new ct["a"].Store({state:{user:null,products:[]},mutations:{LOGOUT:function(t){t.user=null,localStorage.removeItem("token")},LOGIN:function(t,e){t.user=e},FETCHPRODUCT:function(t,e){t.products=e}},actions:{refresh:function(t){var e=t.commit;localStorage.getItem("token")&&d()({method:"post",url:"http://shopify-server.ricky-works.online/user/refresh",headers:{token:localStorage.getItem("token")}}).then((function(t){var r=t.data;e("LOGIN",r)})).catch(console.log)},fetchProducts:function(t){var e=t.commit;d()({method:"get",url:"http://shopify-server.ricky-works.online/product",headers:{token:localStorage.getItem("token")}}).then((function(t){var r=t.data;e("FETCHPRODUCT",r)})).catch(console.log)}}});o["default"].config.productionTip=!1,o["default"].use(nt["a"]),o["default"].use(it.a),new o["default"]({router:at,store:ut,render:function(t){return t(_)}}).$mount("#app")},"69cb":function(t,e,r){"use strict";var o=r("dfb2"),a=r.n(o);a.a},aea1:function(t,e,r){},af68:function(t,e,r){"use strict";var o=r("3f26"),a=r.n(o);a.a},dfb2:function(t,e,r){},e1cf:function(t,e,r){"use strict";var o=r("f3b8"),a=r.n(o);a.a},f3b8:function(t,e,r){},fec4:function(t,e,r){}});
//# sourceMappingURL=app.b141b83c.js.map